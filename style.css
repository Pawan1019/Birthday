@import url(https://fonts.googleapis.com/css?family=Lato:300italic);
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    overflow: hidden;
}

.container {
    min-height: 100vh;
    background: linear-gradient(135deg, #0f172a 0%, #581c87 50%, #0f172a 100%);
    position: relative;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Enhanced Stars background */
.star {
    position: absolute;
    background: white;
    border-radius: 50%;
    opacity: 0;
    animation: starTwinkle 3s ease-in-out infinite;
}

.star.small {
    width: 2px;
    height: 2px;
}

.star.medium {
    width: 3px;
    height: 3px;
}

.star.large {
    width: 4px;
    height: 4px;
}

/* Enhanced Sparkles with different types */
.sparkle {
    position: absolute;
    border-radius: 50%;
    opacity: 0;
    animation: sparkleFloat 4s ease-in-out infinite;
}

.sparkle.pink {
    background: #f472b6;
    box-shadow: 0 0 10px #f472b6;
}

.sparkle.purple {
    background: #a855f7;
    box-shadow: 0 0 10px #a855f7;
}

.sparkle.white {
    background: white;
    box-shadow: 0 0 8px rgba(255, 255, 255, 0.8);
}

.sparkle.small {
    width: 4px;
    height: 4px;
}

.sparkle.medium {
    width: 6px;
    height: 6px;
}

.sparkle.large {
    width: 8px;
    height: 8px;
}

/* Floating hearts */
.floating-heart {
    position: absolute;
    color: #f472b6;
    font-size: 12px;
    opacity: 0;
    animation: floatingHearts 8s ease-in-out infinite;
    pointer-events: none;
}

/* Magic dust particles */
.magic-dust {
    position: absolute;
    width: 1px;
    height: 1px;
    background: #fbbf24;
    border-radius: 50%;
    opacity: 0;
    animation: magicDust 6s linear infinite;
}

/* Confetti Explosion */
.confetti-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1000;
}

.confetti {
    position: absolute;
    width: 10px;
    height: 10px;
    opacity: 0;
}

.confetti.square {
    background: #f472b6;
    animation: confettiFall 4s ease-out forwards;
}

.confetti.circle {
    background: #a855f7;
    border-radius: 50%;
    animation: confettiFall 4s ease-out forwards;
}

.confetti.triangle {
    width: 0;
    height: 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-bottom: 10px solid #ec4899;
    animation: confettiFall 4s ease-out forwards;
}

.confetti.heart {
    color: #f472b6;
    font-size: 12px;
    width: auto;
    height: auto;
    animation: confettiFall 4s ease-out forwards;
}

.confetti.star {
    color: #fbbf24;
    font-size: 10px;
    width: auto;
    height: auto;
    animation: confettiFall 4s ease-out forwards;
}

.confetti.diamond {
    width: 8px;
    height: 8px;
    background: #10b981;
    transform: rotate(45deg);
    animation: confettiFall 4s ease-out forwards;
}

/* Heart Loader Container */
.heart-loader {
    width: 120px;
    height: 120px;
    margin: 0 auto;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Heart Shape with enhanced animation */
.heart-shape {
    width: 80px;
    height: 80px;
    position: relative;
    animation: heartLoaderCycle 4s ease-in-out infinite;
    filter: drop-shadow(0 0 20px rgba(236, 72, 153, 0.5));
}

/* Enhanced white shadow below heart */
.heart-shadow {
    position: absolute;
    bottom: -20px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 20px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 50%;
    filter: blur(12px);
    animation: shadowPulse 2s ease-in-out infinite;
}

/* Enhanced heart glow effect */
.heart-glow {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

.heart-glow-effect {
    width: 140px;
    height: 70px;
    background: radial-gradient(ellipse, rgba(236, 72, 153, 0.4) 0%, rgba(236, 72, 153, 0.1) 70%, transparent 100%);
    border-radius: 50%;
    filter: blur(30px);
    animation: glowPulse 3s ease-in-out infinite;
}

/* Main content with enhanced animations */
.main-content {
    text-align: center;
    z-index: 10;
    position: relative;
    animation: contentFloat 6s ease-in-out infinite;
}

.heart-container {
    position: relative;
    margin-bottom: 2rem;
    animation: heartContainerFloat 4s ease-in-out infinite;
}

.main-title {
    font-size: 3rem;
    font-weight: bold;
    background: linear-gradient(45deg, #f472b6, #a855f7, #ec4899, #d946ef);
    background-size: 300% 300%;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 1rem;
    animation: gradientShift 4s ease-in-out infinite, textGlow 2s ease-in-out infinite, fade-in 1s ease-out;
    text-shadow: 0 0 30px rgba(236, 72, 153, 0.3);
}

.subtitle {
    font-size: 1.25rem;
    color: #d1d5db;
    opacity: 0.9;
    margin-bottom: 2rem;
    animation: fade-in 1s ease-out 0.5s both, subtitleFloat 5s ease-in-out infinite;
    text-shadow: 0 0 10px rgba(209, 213, 219, 0.3);
}

/* Enhanced loading text */
.loading-text {
    font-size: 0.875rem;
    color: #9ca3af;
    margin-top: 1rem;
    opacity: 0;
    animation: fade-in 0.5s ease-out 0.5s forwards, loadingPulse 2s ease-in-out infinite;
}

/* Main page content with enhanced animations */
.main-page {
    display: none; /* Hidden by default */
    text-align: center;
    padding: 2rem;
    position: absolute; /* Added for smooth transitions */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    flex-direction: column; /* Added for centering when visible */
    align-items: center; /* Added for centering when visible */
    justify-content: center; /* Added for centering when visible */
    z-index: 1; /* Ensure it's above the background */
}

.main-page.show {
    display: flex; /* Only display as flex when 'show' class is present */
    animation: pageSlideIn 1.5s ease-out;
}

/* NEW: Slide out to top animation for main page */
.main-page.slide-out-to-top {
    animation: slideOutToTop 0.8s ease-out forwards;
}

.main-page .heart {
    width: 64px;
    height: 64px;
    margin: 0 auto 1.5rem;
    position: relative;
    animation: mainHeartBounce 3s ease-in-out infinite;
    filter: drop-shadow(0 0 15px rgba(236, 72, 153, 0.6));
}

.main-page .heart::before,
.main-page .heart::after {
    content: '';
    width: 32px;
    height: 52px;
    position: absolute;
    left: 32px;
    transform: rotate(-45deg);
    background: linear-gradient(45deg, #ec4899, #f472b6);
    border-radius: 32px 32px 0 0;
    transform-origin: 0 100%;
}

.main-page .heart::after {
    left: 0;
    transform: rotate(45deg);
    transform-origin: 100% 100%;
}

.birthday-title {
    font-size: 4rem;
    font-weight: bold;
    background: linear-gradient(45deg, #f472b6, #a855f7, #ec4899, #d946ef);
    background-size: 300% 300%;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 1rem;
    animation: gradientShift 4s ease-in-out infinite, titleBounce 2s ease-in-out infinite;
    text-shadow: 0 0 40px rgba(236, 72, 153, 0.4);
}

.birthday-subtitle {
    font-size: 1.5rem;
    color: #d1d5db;
    margin-bottom: 2rem;
    animation: subtitleGlow 3s ease-in-out infinite;
    text-shadow: 0 0 15px rgba(209, 213, 219, 0.4);
}

/* Beautiful Countdown Timer */
.countdown-container {
    margin-top: 2rem;
    animation: countdownFloat 4s ease-in-out infinite;
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
}
.countdown-hide {
    opacity: 0 !important;
    transform: translateY(-20px) !important;
}

.countdown-title {
    font-size: 1.2rem;
    color: #d1d5db;
    margin-bottom: 1.5rem;
    opacity: 0.9;
    animation: countdownTitleGlow 3s ease-in-out infinite;
    text-shadow: 0 0 10px rgba(209, 213, 219, 0.3);
}

.countdown-timer {
    display: flex;
    justify-content: center;
    gap: 1.5rem;
    flex-wrap: wrap;
}

.countdown-item {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 15px;
    padding: 1rem 0.8rem;
    min-width: 70px;
    text-align: center;
    animation: countdownItemPulse 2s ease-in-out infinite;
    box-shadow: 0 8px 32px rgba(236, 72, 153, 0.2);
}

.countdown-number {
    font-size: 2rem;
    font-weight: bold;
    background: linear-gradient(45deg, #f472b6, #a855f7, #ec4899);
    background-size: 200% 200%;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: gradientShift 3s ease-in-out infinite;
    text-shadow: 0 0 20px rgba(236, 72, 153, 0.5);
    line-height: 1;
    margin-bottom: 0.3rem;
}

.countdown-label {
    font-size: 0.75rem;
    color: #d1d5db;
    text-transform: uppercase;
    letter-spacing: 1px;
    opacity: 0.8;
    font-weight: 500;
}

.countdown-message {
    margin-top: 1.5rem;
    font-size: 1rem;
    color: #f472b6;
    opacity: 0.9;
    animation: messageGlow 2s ease-in-out infinite;
    text-shadow: 0 0 15px rgba(244, 114, 182, 0.4);
}

/* Let's Celebrate Button */
.celebrate-button {
    display: none;
    margin-top: 2rem;
    animation: celebrateButtonEntrance 1s ease-out;
}

.celebrate-button.show {
    display: block;
}

.celebrate-btn {
    background: linear-gradient(45deg, #f472b6, #a855f7, #ec4899);
    background-size: 200% 200%;
    border: none;
    border-radius: 25px;
    padding: 0.7rem 1.8rem;
    font-size: 1.1rem;
    font-weight: bold;
    color: white;
    cursor: pointer;
    text-transform: uppercase;
    letter-spacing: 2px;
    box-shadow: 0 15px 35px rgba(236, 72, 153, 0.4);
    transition: all 0.3s ease;
    animation: gradientShift 3s ease-in-out infinite, celebrateButtonPulse 2s ease-in-out infinite;
    position: relative;
    overflow: hidden;
}

.celebrate-btn:hover {
    transform: translateY(-5px) scale(1.05);
    box-shadow: 0 20px 40px rgba(236, 72, 153, 0.6);
}

.celebrate-btn:active {
    transform: translateY(-2px) scale(1.02);
}

.celebrate-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.5s;
}

.celebrate-btn:hover::before {
    left: 100%;
}

/* Fixed Heart Shape - Properly Overlapping */
.heart-shape::before,
.heart-shape::after {
    content: '';
    position: absolute;
    background: linear-gradient(45deg, #ec4899, #f472b6);
}

.heart-shape::before {
    width: 40px;
    height: 64px;
    left: 40px;
    top: 0;
    border-radius: 40px 40px 0 0;
    transform: rotate(-45deg);
    transform-origin: 0 100%;
    animation: heartShapeTransformBefore 4s ease-in-out infinite;
}

.heart-shape::after {
    width: 40px;
    height: 64px;
    left: 0;
    top: 0;
    border-radius: 40px 40px 0 0;
    transform: rotate(45deg);
    transform-origin: 100% 100%;
    animation: heartShapeTransformAfter 4s ease-in-out infinite;
}

/* Cake Content Styles */
.cake-content {
    display: none; /* Hidden by default */
    text-align: center;
    padding: 2rem;
    position: absolute; /* To overlay and transition */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    flex-direction: column; /* Added for centering when visible */
    align-items: center; /* Added for centering when visible */
    justify-content: center; /* Added for centering when visible */
    background: linear-gradient(135deg, #0f172a 0%, #581c87 50%, #0f172a 100%); /* Match container background */
    z-index: 9; /* Below confetti */
    opacity: 0;
    transform: translateY(100vh); /* Start off-screen at the bottom */
    will-change: transform, opacity; /* Optimize animation performance */
}

.cake-content.show {
    display: flex; /* Make it visible when 'show' class is present */
    animation: scrollUpFromBottom 1s ease-out forwards; /* Scroll-up animation */
}

/* Message Box Styles */
.message-box {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 80px;
    height: 60px;
    opacity: 0;
    animation: fadeInMessageBox 1s ease-out 7.5s forwards; /* Appear after cake animation */
    cursor: pointer;
}

.left-message {
    left: calc(50% - 360px); /* Position left of the cake */
}

.right-message {
    right: calc(50% - 360px); /* Position right of the cake */
}

.envelope {
    width: 100%;
    height: 100%;
    background: linear-gradient(45deg, #f472b6, #a855f7);
    border-radius: 10px;
    position: relative;
    box-shadow: 0 8px 20px rgba(236, 72, 153, 0.3);
    transition: transform 0.3s ease;
    overflow: hidden;
}

.envelope-body {
    position: relative; /* keep relative */
    top: 0;
    left: 0;
    width: 100%;
    height: 25px;
    background: linear-gradient(45deg, #eaccdb, #ebc9db);
    clip-path: polygon(0 0, 50% 30px, 100% 0);
    transform-origin: top;
    transition: transform 0.3s ease;
    border-radius: 10px;
}

.envelope-flap {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 30px;
    background: linear-gradient(45deg, #ec4899, #f472b6);
    clip-path: polygon(0 0, 50% 30px, 100% 0);
    transform-origin: top;
    transition: transform 0.3s ease;
    border-radius: 10px;
}

.message-box:hover .envelope {
    transform: scale(1.05);
    overflow: visible;
    
}

.message-box:hover .envelope-flap {
    transform: rotateX(180deg);
    border-radius: 10px;
}

/* Text below the message box */
.envelope-text {
    position: absolute;
    top: 100%; /* directly below envelope */
    left: 50%;
    transform: translateX(-50%);
    margin-top: 8px;
    font-size: 14px;
    font-weight: 500;
    color: #f472b6;
    box-shadow: 0 4px 15px rgba(236, 72, 153, 0.3);
    text-shadow: 0 0 30px rgba(236, 72, 153, 0.3);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.4s ease, transform 0.4s ease;
    white-space: nowrap;
}

/* Show text on hover */
.message-box:hover .envelope-text {
    opacity: 1;
    transform: translateX(-50%) translateY(4px);
}

#cake {
    display: block;
    position: relative;
    margin: -10em auto 0 auto;
}

.cake-message {
    font-size: 3rem;
    font-weight: bold;
    background: linear-gradient(45deg, #f472b6, #a855f7, #ec4899, #d946ef);
    background-size: 300% 300%;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-top: 2rem;
    animation: gradientShift 4s ease-in-out infinite, textGlow 2s ease-in-out infinite, fadeIn 1s ease-out 0.5s both;
    text-shadow: 0 0 30px rgba(236, 72, 153, 0.3);
}

/* Animated HTML/CSS Cake Styles */
.animated-cake {
    position: relative;
    width: 200px;
    height: 400px;
    overflow: hidden;
    transform-origin: center;
    animation: cakeBounceIn 1.5s ease-out forwards;
    filter: drop-shadow(0 0 30px rgba(255, 255, 255, 0.3));
}

.candle {
    background: #ffffff;
    border-radius: 10px;
    position: absolute;
    top: 228px;
    left: 50%;
    margin-left: -2.4px;
    margin-top: -8.33333333px;
    width: 5px;
    height: 35px;
    transform: translateY(-300px);
    -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
    -webkit-animation: in 500ms 7s ease-out forwards;
            animation: in 500ms 7s ease-out forwards;
}
.candle:after, .candle:before {
    background: rgba(255, 0, 0, 0.4);
    content: "";
    position: absolute;
    width: 100%;
    height: 2.22222222px;
}
.candle:after {
    top: 25%;
    left: 0;
}

.candle:before {
    top: 45%;
    left: 0;
}
.fire {
    border-radius: 100%;
    position: absolute;
    top: -20px;
    left: 50%;
    margin-left: -2.6px;
    width: 6.66666667px;
    height: 18px;
}

.fire:nth-child(1) {
    -webkit-animation: fire 2s 6.5s infinite;
    animation: fire 2s 6.5s infinite;
}

.fire:nth-child(2) {
    -webkit-animation: fire 1.5s 6.5s infinite;
    animation: fire 1.5s 6.5s infinite;
}

.fire:nth-child(3) {
    -webkit-animation: fire 1s 6.5s infinite;
    animation: fire 1s 6.5s infinite;
}

.fire:nth-child(4) {
    -webkit-animation: fire 0.5s 6.5s infinite;
    animation: fire 0.5s 6.5s infinite;
}

.fire:nth-child(5) {
    -webkit-animation: fire 0.2s 6.5s infinite;
    animation: fire 0.2s 6.5s infinite;
}

@-webkit-keyframes fire {
    0%, 100% {
        background: rgba(254, 248, 97, 0.5);
        box-shadow: 0 0 40px 10px rgba(248, 233, 209, 0.2);
        transform: translateY(0) scale(1);
    }
    50% {
        background: rgba(255, 50, 0, 0.1);
        box-shadow: 0 0 40px 20px rgba(248, 233, 209, 0.2);
        transform: translateY(-20px) scale(0);
    }
}
@keyframes fire {
    0%, 100% {
        background: rgba(254, 248, 97, 0.5);
        box-shadow: 0 0 40px 10px rgba(248, 233, 209, 0.2);
        transform: translateY(0) scale(1);
    }
    50% {
        background: rgba(255, 50, 0, 0.1);
        box-shadow: 0 0 40px 20px rgba(248, 233, 209, 0.2);
        transform: translateY(-20px) scale(0);
    }
}
@-webkit-keyframes in {
    to {
        transform: translateY(0);
    }
}
@keyframes in {
    to {
        transform: translateY(0);
    }
}
.text {
    color: #d1d1d1;
    font-family: "Lato", sans-serif;
    font-weight: 300;
    font-style: italic;
    text-align: center;
}
.text h1 {
    font-size: 1.4em;
}
/* Keyframes for cake animations */
@keyframes candleWiggle {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-2deg); }
    75% { transform: rotate(2deg); }
}

/* Enhanced Animations */
@keyframes starTwinkle {
    0%, 100% { opacity: 0; transform: scale(0.5); }
    50% { opacity: 1; transform: scale(1.2); }
}

@keyframes sparkleFloat {
    0% { opacity: 0; transform: translateY(0px) rotate(0deg); }
    25% { opacity: 1; transform: translateY(-20px) rotate(90deg); }
    50% { opacity: 0.8; transform: translateY(-40px) rotate(180deg); }
    75% { opacity: 0.6; transform: translateY(-20px) rotate(270deg); }
    100% { opacity: 0; transform: translateY(0px) rotate(360deg); }
}

@keyframes floatingHearts {
    0% { opacity: 0; transform: translateY(100vh) scale(0); }
    10% { opacity: 1; transform: translateY(80vh) scale(1); }
    90% { opacity: 1; transform: translateY(-20vh) scale(1); }
    100% { opacity: 0; transform: translateY(-40vh) scale(0); }
}

@keyframes magicDust {
    0% { opacity: 0; transform: translateY(100vh) translateX(0px); }
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% { opacity: 0; transform: translateY(-20vh) translateX(50px); }
}

/* Confetti Animation */
@keyframes confettiFall {
    0% {
        opacity: 1;
        transform: translateY(-100vh) rotate(0deg);
    }
    100% {
        opacity: 0;
        transform: translateY(100vh) rotate(720deg);
    }
}

@keyframes heartLoaderCycle {
    0%, 20% { transform: rotate(0deg) scale(0.8); }
    10% { transform: rotate(180deg) scale(0.9); }
    40% { transform: rotate(360deg) scale(1); }
    50% { transform: rotate(360deg) scale(1.2); }
    60% { transform: rotate(360deg) scale(0.8); }
    70% { transform: rotate(360deg) scale(1.1); }
    80% { transform: rotate(360deg) scale(1); }
    100% { transform: rotate(720deg) scale(0.8); }
}

@keyframes glowPulse {
    0%, 100% { transform: scale(1); opacity: 0.4; }
    50% { transform: scale(1.2); opacity: 0.6; }
}

@keyframes contentFloat {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

@keyframes heartContainerFloat {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    50% { transform: translateY(-15px) rotate(2deg); }
}

@keyframes gradientShift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
}

@keyframes textGlow {
    0%, 100% { filter: drop-shadow(0 0 10px rgba(236, 72, 153, 0.3)); }
    50% { filter: drop-shadow(0 0 20px rgba(236, 72, 153, 0.6)); }
}

@keyframes subtitleFloat {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-5px); }
}

@keyframes loadingPulse {
    0%, 100% { opacity: 0.6; }
    50% { opacity: 1; }
}

@keyframes pageSlideIn {
    0% { opacity: 0; transform: translateY(50px) scale(0.9); }
    100% { opacity: 1; transform: translateY(0px) scale(1); }
}

@keyframes mainHeartBounce {
    0%, 100% { transform: translateY(0px) scale(1); }
    50% { transform: translateY(-20px) scale(1.1); }
}

@keyframes titleBounce {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

@keyframes subtitleGlow {
    0%, 100% { text-shadow: 0 0 15px rgba(209, 213, 219, 0.4); }
    50% { text-shadow: 0 0 25px rgba(209, 213, 219, 0.6); }
}

/* Countdown Animations */
@keyframes countdownFloat {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-8px); }
}

@keyframes countdownTitleGlow {
    0%, 100% { text-shadow: 0 0 10px rgba(209, 213, 219, 0.3); }
    50% { text-shadow: 0 0 20px rgba(209, 213, 219, 0.5); }
}

@keyframes countdownItemPulse {
    0%, 100% {
        transform: scale(1);
        box-shadow: 0 8px 32px rgba(236, 72, 153, 0.2);
    }
    50% {
        transform: scale(1.05);
        box-shadow: 0 12px 40px rgba(236, 72, 153, 0.4);
    }
}

@keyframes messageGlow {
    0%, 100% {
        text-shadow: 0 0 15px rgba(244, 114, 182, 0.4);
        opacity: 0.9;
    }
    50% {
        text-shadow: 0 0 25px rgba(244, 114, 182, 0.6);
        opacity: 1;
    }
}

/* Celebrate Button Animations */
@keyframes celebrateButtonEntrance {
    0% {
        opacity: 0;
        transform: translateY(30px) scale(0.8);
    }
    100% {
        opacity: 1;
        transform: translateY(0px) scale(1);
    }
}

@keyframes celebrateButtonPulse {
    0%, 100% {
        transform: scale(1);
        box-shadow: 0 15px 35px rgba(236, 72, 153, 0.4);
    }
    50% {
        transform: scale(1.02);
        box-shadow: 0 20px 45px rgba(236, 72, 153, 0.6);
    }
}

/* Heart shape transformations */
@keyframes heartShapeTransformBefore {
    0%, 20% {
        width: 40px; height: 40px; border-radius: 50%;
        left: 20px; top: 20px; transform: rotate(0deg);
    }
    40%, 80% {
        width: 40px; height: 64px; border-radius: 40px 40px 0 0;
        left: 40px; top: 0; transform: rotate(-45deg);
    }
    100% {
        width: 40px; height: 40px; border-radius: 50%;
        left: 20px; top: 20px; transform: rotate(0deg);
    }
}

@keyframes heartShapeTransformAfter {
    0%, 20% {
        width: 40px; height: 40px; border-radius: 50%;
        left: 20px; top: 20px; transform: rotate(0deg);
    }
    40%, 80% {
        width: 40px; height: 64px; border-radius: 40px 40px 0 0;
        left: 0; top: 0; transform: rotate(45deg);
    }
    100% {
        width: 40px; height: 40px; border-radius: 50%;
        left: 20px; top: 20px; transform: rotate(0deg);
    }
}

@keyframes shadowPulse {
    0%, 100% { opacity: 0.9; transform: translateX(-50%) scale(1); }
    50% { opacity: 0.5; transform: translateX(-50%) scale(1.3); }
}

@keyframes fade-in {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeInMessageBox {
    from { opacity: 0; transform: translateY(-50%) scale(0.8); }
    to { opacity: 1; transform: translateY(-50%) scale(1); }
}

/* Scroll-up Animation for Cake Content */
@keyframes scrollUpFromBottom {
    from { transform: translateY(100vh); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

/* NEW: Slide out to top animation for main page */
@keyframes slideOutToTop {
    from { transform: translateY(0); opacity: 1; }
    to { transform: translateY(-100vh); opacity: 0; }
}

@keyframes cakeBounceIn {
    0% { transform: scale(0.5) translateY(50px); opacity: 0; }
    60% { transform: scale(1.1) translateY(-10px); opacity: 1; }
    80% { transform: scale(0.95) translateY(5px); }
    100% { transform: scale(1) translateY(0); opacity: 1; }
}

/* Modal Styles */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(10px); /* Blurred background */
    -webkit-backdrop-filter: blur(10px); /* For Safari support */
    z-index: 1001;
    justify-content: center;
    align-items: center;
}

.modal.show {
    display: flex;
    animation: fadeInModal 0.5s ease-out forwards;
}

.modal.fadeOut{
    animation: fadeOut 0.5s ease-out forwards;
}

.modal-content {
    padding: 1.5rem;
    background: rgba(255, 255, 255, 0.1); /* Lighter transparency for better contrast */
    border-radius: 15px; /* Softer corners */
    border: 1px solid rgba(255, 255, 255, 0.3); /* Softer border */
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1); /* Reduced shadow for subtlety */
    color: #fff; /* Ensure text is readable */
    backdrop-filter: blur(15px) saturate(180%); /* Enhance vibrancy */
    -webkit-backdrop-filter: blur(15px) saturate(180%);
}

.close-btn {
    position: absolute;
    top: 1rem;
    right: 1rem;
    font-size: 1.5rem;
    color: #f472b6;
    cursor: pointer;
    transition: transform 0.3s ease, color 0.3s ease;
}

.close-btn:hover {
    transform: scale(1.2);
    color: #ec4899;
}

.modal-title {
    font-size: 2rem;
    color: #f472b6;
    margin-bottom: 1rem;
    animation: titleGlow 2s ease-in-out infinite;
    text-shadow: 0 0 10px rgba(244, 114, 182, 0.6);
    overflow: hidden;
    display: inline-block;
    white-space: pre;
    border-right: 2px solid #f472b6;
    padding-right: 2px;
}

.modal-message {
    font-size: 1.2rem;
    color: #d1d5db;
    animation: messageFloat 3s ease-in-out infinite;
    text-shadow: 0 0 5px rgba(209, 213, 219, 0.4);
    overflow: hidden;
    display: inline-block;
    white-space: pre;
    border-right: 2px solid #f472b6;
    padding-right: 2px;
}

/* Arrow Button */
.arrow-button-container {
    position: absolute;
    bottom: 20px; /* Distance from the bottom */
    right: 20px;  /* Distance from the right */
    z-index: 10;  /* Ensure it stays above other elements */
    opacity: 0;
    animation: fadeInMessageBox 1s ease-out 7.5s forwards;
}

.arrow-button {
    background: linear-gradient(45deg, #f472b6, #a855f7); /* Match the theme */
    border: none;
    border-radius: 10px; /* Circular button */
    width: 40px; /* Adjust size as needed */
    height: 40px; /* Adjust size as needed */
    font-size: 1.2rem; /* Adjust icon size */
    color: white;
    cursor: pointer;
    box-shadow: 0 8px 20px rgba(236, 72, 153, 0.3); /* Subtle shadow */
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.arrow-button:hover {
    transform: scale(1.1); /* Slight scale on hover */
    box-shadow: 0 12px 25px rgba(236, 72, 153, 0.5);
}

/* New Media Selection Modal Styles */
.media-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(5px);
    z-index: 1000;
    align-items: center;
    justify-content: center;
    will-change: opacity;
    transition: opacity 0.5s ease-out;
}

.media-modal.show {
    display: flex;
    animation: fadeInModal 0.5s ease-out forwards;
}

.media-modal.fadeOut {
    animation: fadeOut 0.5s ease-out forwards;
}

.media-modal-content {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border-radius: 15px;
    padding: 2rem;
    max-width: 500px;
    width: 90%;
    box-shadow: 0 8px 32px rgba(236, 72, 153, 0.3);
    position: relative;
    border: 1px solid rgba(255, 255, 255, 0.2);
    text-align: center;
}

.media-close-btn {
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 1.5rem;
    color: #f472b6;
    cursor: pointer;
    transition: transform 0.3s ease;
}

.media-close-btn:hover {
    transform: scale(1.2);
}

.media-modal-title {
    font-size: 2rem;
    font-weight: bold;
    color: #f472b6;
    margin-bottom: 1rem;
    text-shadow: 0 0 15px rgba(244, 114, 182, 0.4);
}

.media-modal-message {
    font-size: 1.2rem;
    color: #d1d5db;
    margin-bottom: 1.5rem;
    text-shadow: 0 0 10px rgba(209, 213, 219, 0.4);
}

.media-modal-buttons {
    display: flex;
    justify-content: center;
    gap: 1rem;
}

.media-btn {
    background: linear-gradient(45deg, #f472b6, #a855f7);
    border: none;
    border-radius: 10px;
    padding: 0.7rem 1.5rem;
    font-size: 1rem;
    font-weight: bold;
    color: white;
    cursor: pointer;
    box-shadow: 0 8px 20px rgba(236, 72, 153, 0.3);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.media-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 12px 25px rgba(236, 72, 153, 0.5);
}

.media-btn:active {
    transform: scale(1);
}

/* Image Content Styles */
.image-content {
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 3;
    will-change: transform, opacity;
    transition: transform 0.8s ease-out, opacity 0.8s ease-out;
}

.image-content.show {
    display: flex;
    animation: slideInFromLeft 0.8s ease-out forwards;
}

.image-content.slide-out-to-left {
    animation: slideOutToLeft 0.8s ease-out forwards;
}

.image-message {
    font-size: 2.5rem;
    font-weight: bold;
    color: #f472b6;
    text-shadow: 0 0 15px rgba(244, 114, 182, 0.4);
    margin-bottom: 2rem;
    text-align: center;
}

/* Video Content Styles */
.video-content {
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 4;
    will-change: transform, opacity;
    transition: transform 0.8s ease-out, opacity 0.8s ease-out;
}

.video-content.show {
    display: flex;
    animation: slideInFromRight 0.8s ease-out forwards;
}

.video-content.slide-out-to-left {
    animation: slideOutToLeft 0.8s ease-out forwards;
}

.video-content.slide-out-to-right {
    animation: slideOutToRight 0.8s ease-out forwards;
}

.video-message {
    font-size: 2.5rem;
    font-weight: bold;
    color: #f472b6;
    text-shadow: 0 0 15px rgba(244, 114, 182, 0.4);
    margin-bottom: 2rem;
    text-align: center;
}

.video-frame {
    width: 100%;
    max-width: 640px;
    height: 360px;
    border-radius: 10px;
    border: 2px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 4px 10px rgba(236, 72, 153, 0.3);
    z-index: 1;
}

/* Go to Videos Button */
.go-to-videos-btn {
    background: linear-gradient(45deg, #f472b6, #a855f7);
    border: none;
    border-radius: 10px;
    padding: 0.7rem 1.5rem;
    font-size: 1rem;
    font-weight: bold;
    color: white;
    cursor: pointer;
    box-shadow: 0 8px 20px rgba(236, 72, 153, 0.3);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.go-to-videos-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 12px 25px rgba(236, 72, 153, 0.5);
}

.go-to-videos-btn:active {
    transform: scale(1);
}

/* Go to Images Button */
.go-to-images-btn {
    background: linear-gradient(45deg, #f472b6, #a855f7);
    border: none;
    border-radius: 10px;
    padding: 0.7rem 1.5rem;
    font-size: 1rem;
    font-weight: bold;
    color: white;
    cursor: pointer;
    box-shadow: 0 8px 20px rgba(236, 72, 153, 0.3);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.go-to-images-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 12px 25px rgba(236, 72, 153, 0.5);
}

.go-to-images-btn:active {
    transform: scale(1);
}

/* Retry Button */
.retry-btn {
    background: linear-gradient(45deg, #f472b6, #a855f7);
    border: none;
    border-radius: 10px;
    padding: 0.7rem 1.5rem;
    font-size: 1rem;
    font-weight: bold;
    color: white;
    cursor: pointer;
    box-shadow: 0 8px 20px rgba(236, 72, 153, 0.3);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.retry-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 12px 25px rgba(236, 72, 153, 0.5);
}

.retry-btn:active {
    transform: scale(1);
}

/* Typing Animation */
@keyframes typing {
    from { width: 0; }
    to { width: 100%; }
}

@keyframes blink-caret {
    from, to { border-color: transparent; }
    50% { border-color: #f472b6; }
}

/* Modal Animations */
@keyframes fadeInModal {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes scaleIn {
    from { transform: scale(0.7); }
    to { transform: scale(1); }
}

@keyframes titleGlow {
    0%, 100% { text-shadow: 0 0 10px rgba(244, 114, 182, 0.6); }
    50% { text-shadow: 0 0 20px rgba(244, 114, 182, 0.8); }
}

@keyframes messageFloat {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

/* Image Modal Animation */
@keyframes fadeOut {
    0% { opacity: 1; }
    100% { opacity: 0; }
}

@keyframes slideInFromLeft {
    0% { transform: translateX(-100%); opacity: 0; }
    100% { transform: translateX(0); opacity: 1; }
}

@keyframes slideOutToRight {
    0% { transform: translateX(0); opacity: 1; }
    100% { transform: translateX(100%); opacity: 0; }
}

@keyframes slideInFromRight {
    0% { transform: translateX(100%); opacity: 0; }
    100% { transform: translateX(0); opacity: 1; }
}

@keyframes slideOutToLeft {
    0% { transform: translateX(0); opacity: 1; }
    100% { transform: translateX(-100%); opacity: 0; }
}

/* Aurora Veil Carousel - Unique Effect */
.aurora-carousel {
    position: relative;
    width: 80%;
    max-width: 900px;
    margin: 2rem auto;
    overflow: hidden;
    perspective: 1000px;
    box-shadow: 0 10px 30px rgba(236, 72, 153, 0.3);
    border-radius: 15px;
    aspect-ratio: 16 / 9;
    background: linear-gradient(180deg, rgba(0,0,0,0.05), rgba(0,0,0,0.12));
    box-sizing: border-box;
}

.carousel-track {
    display: flex;
    height: 100%;
    will-change: transform;
}

.carousel-slide {
    flex: 0 0 calc(100% / 3); /* 33.33% per slide: left peek (33%), center (33%), right peek (33%) */
    height: 100%;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 0.5vw; /* Consistent slight gap (~4-8px); vw for device consistency */
}

.carousel-slide:last-child {
    margin-right: 0; /* No margin on last to avoid extra space at end */
}
.carousel-slide img {
    width: 100%;
    height: 100%;
    aspect-ratio: 4 / 3; /* Force uniform ratio for photos; change to 1/1 for square, 16/9 for landscape */
    object-fit: cover; /* Changed to cover for full fill without distortion; use contain if you prefer letterboxing */
    object-position: center;
    display: block;
    transition: filter 0.3s ease; /* Subtle enhancement */
}

/* Left arc vignette */
.aurora-carousel::before {
    content: '';
    position: absolute;
    top: 0;
    left: -15px;
    width: 40%; 
    height: 100%;
    background: linear-gradient(
        to right,
        rgba(0,0,0,0.6) 0%,   /* darkest at the edge */
        rgba(0,0,0,0.4) 40%,  /* smooth fade */
        transparent 100%      /* fade into content */
    );
    filter: blur(15px);  /* soften transition */
    z-index: 5;
    pointer-events: none;
}

/* Right arc vignette */
.aurora-carousel::after {
    content: '';
    position: absolute;
    top: 0;
    right: -15px;
    width: 40%;
    height: 100%;
    background: linear-gradient(
        to left,
        rgba(0,0,0,0.6) 0%,
        rgba(0,0,0,0.4) 40%,
        transparent 100%
    );
    filter: blur(15px);
    z-index: 5;
    pointer-events: none;
}

/* Aurora veil - Animates on each slide for flowing magic during scroll */
.carousel-slide::before {
    content: '';
    position: absolute;
    top: -100%;
    left: 0;
    width: 100%;
    height: 300%;
    opacity: 0;
    transform: skewY(20deg) translateY(100%);
    filter: blur(20px);
    animation: auroraWave 3s ease-in-out infinite; /* Faster for continuous feel */
    z-index: 2;
    pointer-events: none;
}

@keyframes auroraWave {
    0% { transform: skewY(20deg) translateY(100%); opacity: 0; }
    50% { transform: skewY(0) translateY(0); opacity: 0.8; filter: blur(30px); }
    100% { transform: skewY(-20deg) translateY(-100%); opacity: 0; filter: blur(20px); }
}

/* Navigation - Disabled/dimmed for continuous focus */
.carousel-prev, .carousel-next {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: linear-gradient(45deg, #f472b6, #a855f7);
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    color: white;
    font-size: 1.5rem;
    cursor: pointer;
    transition: transform 0.3s ease;
    z-index: 3;
    opacity: 0.5;
    pointer-events: none;
}

.carousel-prev { left: 10px; }
.carousel-next { right: 10px; }

.carousel-prev:hover, .carousel-next:hover {
    transform: translateY(-50%) scale(1.1);
}

/* Responsive design */
@media (max-width: 768px) {
    .message-box {
        position: relative;
        width: 60px;
        height: 45px;
        margin: 0 auto;
        opacity: 0;
        animation: fadeInMessageBox 1s ease-out 7.5s forwards;
    }

    .left-message {
        display: inline-flex;   /* inline flex to allow side by side */
        position: relative;
        align-items: center;
        margin-top: 1rem;
        margin-right: 45px; /* spacing between message box & arrow */
    }

    .right-message {
        display: none;
    }

    .envelope-text {
        position: absolute;
        top: 100%;
        left: 50%;
        transform: translateX(-50%);
        margin-top: 6px;
        font-size: 12px;
        white-space: nowrap;
    }

    .animated-cake {
        position: relative;
        width: 200px;
        height: auto;
        margin: -10em auto 0 auto;
    }

    .animated-cake .text {
        margin-bottom: 1.5rem;
        position: relative;
    }

    .animated-cake .left-message {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        top: 100%;
        margin-top: 1.5rem;
    }

    /* Arrow button container styles */
    .arrow-button-container {
        display: inline-flex;  /* inline so it sits next to left-message */
        align-items: center;
        margin: 0; /* remove extra spacing */
        opacity: 0;
        bottom: -370px;
        animation: fadeInMessageBox 1s ease-out 7.5s forwards;
    }

    .align-left {
        left: 75px;
        right: auto;
        display: inline-flex;  /* match left-message row layout */
        position: relative;
        margin-top: 1rem;
    }

    .arrow-button {
        background: linear-gradient(45deg, #f472b6, #a855f7);
        border-radius: 10px;
        width: 60px; /* Smaller size for mobile */
        height: 47px; /* Smaller size for mobile */
        font-size: 2rem; /* Adjust icon size */
        color: white;
        font-weight: bold;
        box-shadow: 0 6px 15px rgba(236, 72, 153, 0.3);
    }

    .countdown-timer {
        gap: 1rem;
    }

    .countdown-item {
        min-width: 60px;
        padding: 0.8rem 0.6rem;
    }

    .countdown-number {
        font-size: 1.5rem;
    }

    .countdown-label {
        font-size: 0.7rem;
    }

    .celebrate-btn {
        padding: 0.6rem 1.2rem;
        font-size: 0.9rem;
    }

    .birthday-title {
        font-size: 3rem;
    }

    .birthday-subtitle {
        font-size: 1.2rem;
    }

    .cake-message {
        font-size: 2rem;
    }

    .modal-content {
        padding: 1.5rem;
        background: rgba(255, 255, 255, 0.1); /* Lighter transparency for better contrast */
        border-radius: 15px; /* Softer corners */
        border: 1px solid rgba(255, 255, 255, 0.3); /* Softer border */
        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1); /* Reduced shadow for subtlety */
        color: #fff; /* Ensure text is readable */
        backdrop-filter: blur(15px) saturate(180%); /* Enhance vibrancy */
        -webkit-backdrop-filter: blur(15px) saturate(180%);
    }

    .modal-title {
        font-size: 1.5rem;
    }

    .modal-message {
        font-size: 1rem;
    }

    .media-modal-title {
        font-size: 1.5rem;
    }

    .media-modal-message {
        font-size: 1rem;
    }

    .media-btn {
        padding: 0.6rem 1.2rem;
        font-size: 0.9rem;
    }

    .image-message {
        font-size: 2rem;
    }

    .gallery-image {
        width: 150px;
        height: 150px;
    }

    .video-message {
        font-size: 2rem;
    }

    .video-frame {
        max-width: 90%;
        height: auto;
    }

    .go-to-videos-btn, .go-to-images-btn, .retry-btn  {
        padding: 0.6rem 1.2rem;
        font-size: 0.9rem;
    }
    .aurora-carousel {
        width: 90%;
    }
    .aurora-carousel::before {
        width: 25%;
        background: linear-gradient(
            to right,
            rgba(0,0,0,0.6) 0%,   /* darkest at the edge */
            rgba(0,0,0,0.4) 40%,  /* smooth fade */
            transparent 100%      /* fade into content */
        );
        filter: blur(8px);
    }
    .aurora-carousel::after {
        width: 25%;
        background: linear-gradient(
            to left,
            rgba(0,0,0,0.6) 0%,   /* darkest at the edge */
            rgba(0,0,0,0.4) 40%,  /* smooth fade */
            transparent 100%      /* fade into content */
        );
        filter: blur(8px);
    }
    .carousel-track {
        gap: 1%;
    }
    .carousel-slide {
        flex: 0 0 calc((100% / 3) - (1% * 2 / 3));
    }
    .carousel-slide img {
        max-height: 300px;
    }
    .carousel-slide::before {
        filter: blur(6px);
    }
}

@media (min-width: 768px) {
    .main-title { font-size: 4rem; }
    .subtitle { font-size: 1.5rem; }
    .birthday-title { font-size: 5rem; }
    .birthday-subtitle { font-size: 2rem; }
}

.loading-screen { display: block; }
.loading-screen.hide { display: none; }
